# 시타델 프린터 운용지침서
KUMS Citadel Printer Manual&amp;Config Files
이동현 매니저

## 0. 정보 등급

이 문서는 개조 가능성이 있는 프린터를 서술한다. 이는 하드웨어의 물리적 개조와 활발히 개발되는 소프트웨어의 업데이트를 포함한다. 따라서 아래 서술되는 모든 데이터는 3개의 등급으로 구분하여 인지하여야 한다.

* 불변 등급: 변하지 않는 사실의 서술, 또는 de facto 표준 사항 – 검은색으로 표시
* 가변 등급: 현재로서는 서술된 방향으로 개발되었으나 추후 변경될 가능성이 있는 사항 – *기울임체로 표시*
* 임시 등급: 개발 과정에서 뚜렷한 근거 없이 결정된 사항으로 반드시 변하게 될 사항 – ~~취소선으로 표시~~

이 프린터를 사용하기 위해서 다음의 지식이 필요:

-	3D 프린팅 기본지식
-	[PrusaSlicer](https://www.prusa3d.com/drivers/) 사용법
-	웹 브라우저 사용법

이 프린터를 유지보수 하기 위해서 다음의 지식이 필요:

-	리눅스 터미널
-	웹 마크업 언어(html, css 등)
-	파이썬 (일부 2.7, 대부분 3.0 이상)
-	기초적 전기전자 기술

## 1. 개요

> 시타델 프린터는 VORON 디자인 팀이 설계한 VORON 2.4를 기반으로 메이커스페이스의 환경에 적합한 여러 기능이 추가된 3D 프린터이다. VORON 2.4는 주로 Aliexpress나 Ebay 등 국제적인 쇼핑 사이트에서 구하기 용이한 부품을 사용할 것을 상정하고 설계되었고 110V 전원 소켓 등 전기전자적 부품이 구미권 표준에 맞춰져 있다. 이를 한국에서 주로 유통되는 부품 규격에 맞게 수정하고 웹캠, 챔버 가열기 등을 추가한 것이 시타델 프린터이다.
> 시타델의 원형인 VORON, 탑재된 Octoprint와 Klipper 등 여러 소프트웨어는 모두 세계의 걸출한 개발자들이 오픈 소스로 개발한 것이다. 이 프린터의 사용자는, 자신의 작업물을 거리낌 없이 무료로 공개하는 개발자들의 용단을 인지하고, 그들의 노고에 공감하며, 이를 사용하여 얻어낸 결과물 또한 그들의 정신을 계승하여 세상을 널리 이롭게 하는 데 쓸 것을 결심해야 한다.
>  - 2020년 이동현

## 2. 제원

* 구동방식: [Core-XY](https://corexy.com/)
* 온도 제한: 핫엔드 260도 / 히티드 베드 110도
* 압출 가능 소재: ABS, PETG, TPU, ASA, PLA *(PLA는 핫엔드 어셈블리를 교체하여 사용)*
* 속도 제한: *압출 속도 150mm/s, 이송 속도 300mm/s*
* 가속도 제한: *최대 3000mm/s^2, 권장 1500mm/s^2*
* 출력 좌표 제한: *(0, 0, 0) – (300, 300, 275)*
* 소비 전력: *700W (추정)*
* 프로세서: 라즈베리파이 4B 1개, SKR v1.3 2개
* 소프트웨어: [Octopi](https://octoprint.org/download/) (운영 체제), [Klipper](https://www.klipper3d.org/) (모션 플래너), [Octoprint](https://octoprint.org/) (웹 인터페이스)

## 3. 하드웨어

이 프린터는 Core-XY라는 구동 방식을 사용한다. 이는 모터가 움직이지 않고 영리하게 배치된 벨트를 사용하여 툴헤드를 이송하는 방식이다. 자세한 사항은 [corexy.com](https://corexy.com/)을 참조한다.

![Core-XY Diagram](https://github.com/earthicko/Citadel/blob/main/materials/corexy.png)

이 방식은 모터가 움직이지 않기 때문에 매우 높은 가속도 및 속도를 가능케 하지만 벨트의 **장력과 각도**를 세심하게 설정해야 한다.
- 따라서 매니저는 시타델의 벨트가 풀리에 올바르게 안착하여 구동하는지 감시하여야 한다.

이 프린터는 **리니어 레일**을 사용하여 툴헤드의 이동 경로를 3개 축에 평행하도록 제한한다. 
- 따라서 매니저는 레일이 적절하게 윤활 되었는지 확인하고, 필요시 **재봉틀 윤활유 또는 *리튬 기반 그리스***를 도포한다.
- WD-40의 도포는 방청 피막을 형성해 레일을 망가뜨리므로 **엄격히 금지**한다.

이 프린터는 **E3D V6**를 핫엔드로 사용한다. 핫엔드의 중심에는 **히트 브레이크**라는 부품이 있는데, 이것은 히터 블록에서 발생하는 열이 상부로 전도되지 않게 막아주는 역할을 한다. 히트 브레이크는 PLA를 출력할 때 특히 중요하다. PLA는 불과 60도 정도의 온도에서도 급격히 연해져 히트 브레이크를 통과할 때 곧바로 들어가지 않고 좌굴되어 핫엔드를 막히게 한다. 또한 PLA는 금속에 잘 달라붙는 성질이 있어 히트 브레이크 내벽에 붙어 핫엔드를 막히게 한다. 따라서 PLA를 출력하기 위해서는 내부가 **테플론**으로 코팅된 히트 브레이크를 사용해야 한다. 하지만 테플론은 240도 이상의 온도에서 기능을 잃고 변형된다. 따라서 PLA를 출력할 수 있는 프린터는 ABS를 출력할 수 없고, 그 역 또한 성립된다. 

- *시타델은 대형 ABS 출력물을 최우선 목표로 하여 설계되었다.*

> Q: 큐비콘의 프린터는 모두 테플론 코팅이 된 노즐목을 사용하는데도 ABS를 출력할 수 있습니다. 시타델은 왜 그렇게 할 수 없습니까?
> 
> A: 테플론이 240도 이상의 환경에 노출된다고 하여 그 즉시 변성하는 것은 아닙니다. 다만 장기적으로 보았을 때 테플론은 반드시 변성하여 필라멘트에 섞이거나 녹아내려 노즐을 막히게 합니다. 이는 단순히 노즐을 교체하는 것으로 대처할 수 있지만 진행중인 출력물은 폐기해야 합니다. 이는 범용성 높은 프린터를 지향하는 큐비콘의 전략적 선택으로 이해해야 합니다.

반드시 필요한 경우 압출부 전체를 보관된 PLA 전용 핫엔드 어셈블리로 교체한 후 PLA 또는 PLA+를 출력할 수 있다. 동시에 익스트루더 우측의 배선 버스 PCB의 해당 배선 (히터 전력선, 써미스터 배선 등)을 조심히 연결한다.
-	~~핫엔드 어셈블리가 혼용되지 않도록 주의한다. 보관된 핫엔드 어셈블리의 먼지 유입에 주의한다.~~

이 프린터는 SN-04 인덕티브 센서를 프로브로 사용한다. 간트리 레벨링과 베드 레벨링에 이 센서를 사용한다. 자세한 사항은 배선도를 참조한다.

이 프린터는 2기의 100와트 PTC 히터를 사용해 챔버를 가열한다. *PTC의 특성상 과열로 인한 손상이 불가능하기 때문에 이는 베드 히터에 병렬로 결선되어 별도의 제어가 필요하지 않다.*

이 프린터는 후면의 필터를 통해 내부 공기를 여과해 배출한다. 필터에 붙은 팬이 멈추면 내부의 fume이 여과되지 않는다. ~~필터 유닛은 시중의 적당한 HEPA 필터를 구입해 절단하여 만들어야 한다.~~

이 프린터는 PEI 코팅된 스프링 철판을 출력면으로 사용한다. PEI는 물리적인 손상에 극히 약하므로 주의해서 관리해야 한다.

*	PEI 시트는 에틸알코올에 반응하므로 아이소프로판올로 세척한다.
*	PEI 시트는 소모품이므로 재료구매 기회가 있을 시 여분을 구매한다.

